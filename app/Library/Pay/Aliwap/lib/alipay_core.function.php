<?php
function createLinkString($sp74c3ab) { $spd74277 = ''; foreach ($sp74c3ab as $spc95936 => $spfa4469) { $spd74277 .= $spc95936 . '=' . $spfa4469 . '&'; } $spd74277 = substr($spd74277, 0, strlen($spd74277) - 1); if (get_magic_quotes_gpc()) { $spd74277 = stripslashes($spd74277); } return $spd74277; } function createLinkStringUrlEncode($sp74c3ab) { $spd74277 = ''; foreach ($sp74c3ab as $spc95936 => $spfa4469) { $spd74277 .= $spc95936 . '=' . urlencode($spfa4469) . '&'; } $spd74277 = substr($spd74277, 0, strlen($spd74277) - 1); if (get_magic_quotes_gpc()) { $spd74277 = stripslashes($spd74277); } return $spd74277; } function paraFilter($sp74c3ab) { $sp874f21 = array(); foreach ($sp74c3ab as $spc95936 => $spfa4469) { if ($spc95936 == 'sign' || $spc95936 == 'sign_type' || $spfa4469 == '') { continue; } else { $sp874f21[$spc95936] = $sp74c3ab[$spc95936]; } } return $sp874f21; } function argSort($sp74c3ab) { ksort($sp74c3ab); reset($sp74c3ab); return $sp74c3ab; } function logResult($sp6adb52 = '') { $sp7e03f4 = fopen('log.txt', 'a'); flock($sp7e03f4, LOCK_EX); fwrite($sp7e03f4, '执行日期：' . strftime('%Y%m%d%H%M%S', time()) . '
' . $sp6adb52 . '
'); flock($sp7e03f4, LOCK_UN); fclose($sp7e03f4); } function getHttpResponsePOST($spadfef0, $spfe0e9b, $sp74c3ab, $spb1f4d1 = '') { if (trim($spb1f4d1) != '') { $spadfef0 = $spadfef0 . '_input_charset=' . $spb1f4d1; } $spd195c7 = curl_init($spadfef0); curl_setopt($spd195c7, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($spd195c7, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($spd195c7, CURLOPT_CAINFO, $spfe0e9b); curl_setopt($spd195c7, CURLOPT_HEADER, 0); curl_setopt($spd195c7, CURLOPT_RETURNTRANSFER, 1); curl_setopt($spd195c7, CURLOPT_POST, true); curl_setopt($spd195c7, CURLOPT_POSTFIELDS, $sp74c3ab); $sp67843d = curl_exec($spd195c7); curl_close($spd195c7); return $sp67843d; } function getHttpResponseGET($spadfef0, $spfe0e9b) { $spd195c7 = curl_init($spadfef0); curl_setopt($spd195c7, CURLOPT_HEADER, 0); curl_setopt($spd195c7, CURLOPT_RETURNTRANSFER, 1); curl_setopt($spd195c7, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($spd195c7, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($spd195c7, CURLOPT_CAINFO, $spfe0e9b); $sp67843d = curl_exec($spd195c7); curl_close($spd195c7); return $sp67843d; } function charsetEncode($sp63ca0e, $sp706c68, $sp898b8a) { if (!isset($sp706c68)) { $sp706c68 = $sp898b8a; } if ($sp898b8a == $sp706c68 || $sp63ca0e == null) { $sp31437a = $sp63ca0e; } elseif (function_exists('mb_convert_encoding')) { $sp31437a = mb_convert_encoding($sp63ca0e, $sp706c68, $sp898b8a); } elseif (function_exists('iconv')) { $sp31437a = iconv($sp898b8a, $sp706c68, $sp63ca0e); } else { die('sorry, you have no libs support for charset change.'); } return $sp31437a; } function charsetDecode($sp63ca0e, $sp898b8a, $sp706c68) { if (!isset($sp898b8a)) { $sp706c68 = $sp898b8a; } if ($sp898b8a == $sp706c68 || $sp63ca0e == null) { $sp31437a = $sp63ca0e; } elseif (function_exists('mb_convert_encoding')) { $sp31437a = mb_convert_encoding($sp63ca0e, $sp706c68, $sp898b8a); } elseif (function_exists('iconv')) { $sp31437a = iconv($sp898b8a, $sp706c68, $sp63ca0e); } else { die('sorry, you have no libs support for charset changes.'); } return $sp31437a; }