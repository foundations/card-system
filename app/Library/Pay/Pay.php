<?php
namespace App\Library\Pay; class Pay { private $driver = null; public function goPay($sp286f3b, $spf13ef6, $sp942f8c, $spd86457, $sp488d84) { $this->driver = static::getDriver($sp286f3b->id, $sp286f3b->driver); $sp54f11a = json_decode($sp286f3b->config, true); $sp54f11a['payway'] = $sp286f3b->way; $this->driver->goPay($sp54f11a, $spf13ef6, $sp942f8c, $spd86457, $sp488d84); return true; } public static function getDriver($spbcbe57, $spb504ee) { $spe54edb = 'App\\Library\\Pay\\' . ucfirst($spb504ee) . '\\Api'; if (!class_exists($spe54edb)) { throw new \Exception('支付驱动未找到'); } return new $spe54edb($spbcbe57); } }