<?php
namespace App\Library\Pay\Youzan\Open; class Http { private static $boundary = ''; public static function get($spadfef0, $sp636f0e) { $spadfef0 = $spadfef0 . '?' . http_build_query($sp636f0e); return self::http($spadfef0, 'GET'); } public static function post($spadfef0, $sp636f0e, $sp72cb1c = array()) { $spfc203b = array(); if (!$sp72cb1c) { $spd86457 = http_build_query($sp636f0e); } else { $spd86457 = self::buildHttpQueryMulti($sp636f0e, $sp72cb1c); $spfc203b[] = 'Content-Type: multipart/form-data; boundary=' . self::$boundary; } return self::http($spadfef0, 'POST', $spd86457, $spfc203b); } private static function http($spadfef0, $sp76360a, $spe157fa = NULL, $spfc203b = array()) { $sp1dcde4 = curl_init(); curl_setopt($sp1dcde4, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0); curl_setopt($sp1dcde4, CURLOPT_USERAGENT, 'X-YZ-Client 2.0.0 - PHP'); curl_setopt($sp1dcde4, CURLOPT_CONNECTTIMEOUT, 30); curl_setopt($sp1dcde4, CURLOPT_TIMEOUT, 30); curl_setopt($sp1dcde4, CURLOPT_RETURNTRANSFER, TRUE); curl_setopt($sp1dcde4, CURLOPT_ENCODING, ''); curl_setopt($sp1dcde4, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($sp1dcde4, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($sp1dcde4, CURLOPT_HEADER, FALSE); switch ($sp76360a) { case 'POST': curl_setopt($sp1dcde4, CURLOPT_POST, TRUE); if (!empty($spe157fa)) { curl_setopt($sp1dcde4, CURLOPT_POSTFIELDS, $spe157fa); } break; } curl_setopt($sp1dcde4, CURLOPT_URL, $spadfef0); curl_setopt($sp1dcde4, CURLOPT_HTTPHEADER, $spfc203b); curl_setopt($sp1dcde4, CURLINFO_HEADER_OUT, TRUE); $sp651d08 = curl_exec($sp1dcde4); $sp5841a2 = curl_getinfo($sp1dcde4, CURLINFO_HTTP_CODE); $sp0f0207 = curl_getinfo($sp1dcde4); curl_close($sp1dcde4); return $sp651d08; } private static function buildHttpQueryMulti($sp636f0e, $sp72cb1c) { if (!$sp636f0e) { return ''; } $spd029da = array(); self::$boundary = $sp32259f = uniqid('------------------'); $spe679dc = '--' . $sp32259f; $sp9bd8fc = $spe679dc . '--'; $sp89b457 = ''; foreach ($sp636f0e as $spc95936 => $sp4d089d) { $sp89b457 .= $spe679dc . '
'; $sp89b457 .= 'content-disposition: form-data; name="' . $spc95936 . '"

'; $sp89b457 .= $sp4d089d . '
'; } foreach ($sp72cb1c as $spc95936 => $sp4d089d) { if (!$sp4d089d) { continue; } if (is_array($sp4d089d)) { $spadfef0 = $sp4d089d['url']; if (isset($sp4d089d['name'])) { $spc4ce88 = $sp4d089d['name']; } else { $sp91c3f9 = explode('?', basename($sp4d089d['url'])); $spc4ce88 = $sp91c3f9[0]; } $spe80432 = isset($sp4d089d['field']) ? $sp4d089d['field'] : $spc95936; } else { $spadfef0 = $sp4d089d; $sp91c3f9 = explode('?', basename($spadfef0)); $spc4ce88 = $sp91c3f9[0]; $spe80432 = $spc95936; } $spb0c78a = file_get_contents($spadfef0); $sp89b457 .= $spe679dc . '
'; $sp89b457 .= 'Content-Disposition: form-data; name="' . $spe80432 . '"; filename="' . $spc4ce88 . '"' . '
'; $sp89b457 .= 'Content-Type: image/unknown

'; $sp89b457 .= $spb0c78a . '
'; } $sp89b457 .= $sp9bd8fc; return $sp89b457; } }