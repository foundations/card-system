<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $spceaf29) { $speb13d0 = $spceaf29->post('user_id'); $spe1d122 = $spceaf29->post('action', \App\Log::ACTION_LOGIN); $sp4f4bed = \App\Log::where('action', $spe1d122); if ($speb13d0 && self::isAdmin()) { $sp4f4bed->where('user_id', $speb13d0); } else { $sp4f4bed->where('user_id', Auth::id()); } $spa278b8 = $spceaf29->post('start_at'); if (strlen($spa278b8)) { $sp4f4bed->where('created_at', '>=', $spa278b8 . ' 00:00:00'); } $sp6aee31 = $spceaf29->post('end_at'); if (strlen($sp6aee31)) { $sp4f4bed->where('created_at', '<=', $sp6aee31 . ' 23:59:59'); } $sp8485a5 = $spceaf29->post('current_page', 1); $sp1d597f = $spceaf29->post('per_page', 20); $sp1447fb = $sp4f4bed->orderBy('created_at', 'DESC')->paginate($sp1d597f, array('*'), 'page', $sp8485a5); return Response::success($sp1447fb); } }