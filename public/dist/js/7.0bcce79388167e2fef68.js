webpackJsonp([7],{bVtw:function(e,t){},myEP:function(e,t,o){"use strict";var a=o("mvHQ"),n=o.n(a),l=o("woOf"),i=o.n(l),r=o("HiEW");t.a={props:{act:{type:String,default:"add"},info:{}},data:function(){var e="",t={act:this.act,id:-1,name:"",way:"",driver:"",comment:"",config:"",img:"",fee_system:""},o=[];return"edit"===this.act?(e="编辑",i()(t,this.info),this.info.enabled&r.h.PC.id&&o.push(r.h.PC.id),this.info.enabled&r.h.MOBILE.id&&o.push(r.h.MOBILE.id)):e="添加",{loading:!1,visible:!0,actLabel:e,paywayEnabled:r.h,formRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],fee_system:[{required:!0,message:"请输入支付通道费率",trigger:"blur"}]},form:t,enableIn:o,showJson:!1,configForm:[]}},watch:{visible:function(e){e||this.$emit("close",!1)}},mounted:function(){"add"===this.act?this.showJson=!0:"edit"===this.act?(this.showJson=!1,this.syncConfig(this.showJson)):(this.$alert("error act"),this.handleClose(!1)),0===this.configForm.length&&(this.showJson=!0)},methods:{syncConfig:function e(t){var o,a,l,i;if(t)o={},this.configForm.forEach(function(e){return o[e.name]=e.value}),this.form.config=n()(o,null,2);else try{for(i in a=[],l=eval("(function(){return "+this.form.config+"})()"),l)l.hasOwnProperty(i)&&a.push({name:i,value:l[i]});this.configForm=a}catch(e){this.$alert(e,"配置出错"),this.showJson=!0}},handleSubmit:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.loading=!0,!1===e.showJson&&e.syncConfig(!0),e.form.enabled=0,e.enableIn.forEach(function(t){return e.form.enabled|=t}),Object(r.b)(e.form).then(function(){e.loading=!1,e.handleClose(!0)}).catch(function(){e.loading=!1}))})},handleClose:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.visible=!1,this.$emit("close",e)}}}},zH7o:function(e,t,o){"use strict";var a,n,l,i,r,s,m;Object.defineProperty(t,"__esModule",{value:!0}),a=o("myEP"),n={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:e.actLabel,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[o("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"70px"}},[o("el-form-item",{attrs:{label:"名称",prop:"name"}},[o("el-input",{attrs:{type:"text",placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"图片",prop:"img"}},[o("el-input",{attrs:{type:"text",placeholder:"图片"},model:{value:e.form.img,callback:function(t){e.$set(e.form,"img",t)},expression:"form.img"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"方式",prop:"way"}},[o("el-input",{attrs:{type:"text",placeholder:"支付方式代码"},model:{value:e.form.way,callback:function(t){e.$set(e.form,"way",t)},expression:"form.way"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"费率",prop:"fee_system"}},[o("el-input",{attrs:{type:"text",placeholder:"支付通道费率"},model:{value:e.form.fee_system,callback:function(t){e.$set(e.form,"fee_system",t)},expression:"form.fee_system"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"启用"}},[o("el-checkbox-group",{model:{value:e.enableIn,callback:function(t){e.enableIn=t},expression:"enableIn"}},[o("el-checkbox",{attrs:{label:e.paywayEnabled.PC.id}},[e._v("电脑端")]),e._v(" "),o("el-checkbox",{attrs:{label:e.paywayEnabled.MOBILE.id}},[e._v("手机端")])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"驱动",prop:"driver"}},[o("el-input",{attrs:{type:"text",placeholder:"支付驱动代码"},model:{value:e.form.driver,callback:function(t){e.$set(e.form,"driver",t)},expression:"form.driver"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"备注",prop:"comment"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},maxlength:100,placeholder:"请输入备注"},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1),e._v(" "),o("div",[o("el-form-item",{attrs:{label:"配置"}},[o("el-radio-group",{on:{change:e.syncConfig},model:{value:e.showJson,callback:function(t){e.showJson=t},expression:"showJson"}},[o("el-radio",{attrs:{label:!0}},[e._v("JSON")]),e._v(" "),o("el-radio",{attrs:{label:!1}},[e._v("Parse")])],1)],1),e._v(" "),e.showJson?o("div",[o("el-form-item",[o("el-input",{attrs:{type:"textarea",autosize:{minRows:7,maxRows:20},placeholder:"请输入JSON格式配置"},model:{value:e.form.config,callback:function(t){e.$set(e.form,"config",t)},expression:"form.config"}})],1)],1):o("div",e._l(this.configForm,function(t){return o("el-form-item",{key:t.name,attrs:{label:t.name}},[o("el-input",{attrs:{type:"text"},model:{value:t.value,callback:function(o){e.$set(t,"value",o)},expression:"item.value"}})],1)}))],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(t){e.handleClose(!1)}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){e.handleSubmit(t)}}},[e._v(e._s(e.actLabel))])],1)],1)},staticRenderFns:[]},l=!1,i=function(e){o("bVtw")},r="data-v-13c5f4df",s=null,m=o("VU/8")(a.a,n,l,i,r,s),t.default=m.exports}});