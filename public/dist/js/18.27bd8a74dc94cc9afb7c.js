webpackJsonp([18],{ROtQ:function(e,n,t){"use strict";var a,r,o,i,l,s,c,d;Object.defineProperty(n,"__esModule",{value:!0}),a=t("woOf"),r=t.n(a),o=t("Y81h"),i=t.n(o),l=t("V/8j"),s={components:{},data:function(){return{loading:!1,labelWidth:"0px",form:{order_clean_unpay_open:0,order_clean_unpay_day:7},formRules:{}}},watch:{loading:function(e,n){e?n||i.a.isStarted()||i.a.start():i.a.done()}},mounted:function(){this.getSet()},methods:{getSet:function(){var e=this;this.loading=!0,Object(l.d)().then(function(n){r()(e.form,n.data),e.loading=!1})},handleResetForm:function(){this.getSet()},handleSubmit:function(){var e=this;this.$refs.form.validate(function(n){n&&(e.loading=!0,Object(l.d)(e.form).then(function(){e.loading=!1,e.$notify({title:"操作成功",message:"配置保存成功",type:"success"})}).catch(function(){e.loading=!1}))})},clearOrder:function(){var e=this;this.$confirm("是否要删除 "+this.form.order_clean_unpay_day+"天 前未支付订单?").then(function(){Object(l.e)(e.form.order_clean_unpay_day).then(function(){e.$notify({title:"成功",message:e.form.order_clean_unpay_day+"天 前未支付订单已删除",type:"success"})})})}}},c={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("el-card",[t("el-form",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],ref:"form",attrs:{model:e.form,"label-width":e.labelWidth,rules:e.formRules}},[t("h2",{staticClass:"title"},[e._v("订单设置")]),e._v(" "),t("el-form-item",{staticClass:"item-container"},[t("el-switch",{attrs:{"inactive-text":"清理未支付订单","active-value":1,"inactive-value":0},model:{value:e.form.order_clean_unpay_open,callback:function(n){e.$set(e.form,"order_clean_unpay_open",n)},expression:"form.order_clean_unpay_open"}})],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.order_clean_unpay_open,expression:"form.order_clean_unpay_open"}],staticClass:"item-container",attrs:{prop:"order_clean_unpay_day",rules:{required:!0,message:"请输入未支付订单保留天数",trigger:"blur"}}},[t("span",[e._v("未支付订单保留天数")]),e._v(" "),t("el-input",{attrs:{type:"number",placeholder:"请输入未支付订单保留天数"},model:{value:e.form.order_clean_unpay_day,callback:function(n){e.$set(e.form,"order_clean_unpay_day",n)},expression:"form.order_clean_unpay_day"}}),e._v(" "),t("span",{staticClass:"tip"},[e._v("超过此天数的未支付订单将被删除")])],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.form.order_clean_unpay_open,expression:"form.order_clean_unpay_open"}],staticStyle:{"font-size":"12px"}},[t("span",[e._v("注意: 本功能需要开启定时任务")]),e._v(" "),t("code",{staticStyle:{display:"block"}},[e._v(" * * * * * php /www/wwwroot/card_dist/artisan schedule:run >> /dev/null 2>&1 & echo\n        'card_job';")]),t("br"),e._v("\n      你也可以点此 "),t("el-button",{attrs:{size:"mini"},on:{click:e.clearOrder}},[e._v("手动清理")])],1)],1),e._v(" "),t("div",{staticClass:"text-center",staticStyle:{"margin-top":"24px"}},[t("el-button",{on:{click:e.handleResetForm}},[e._v("刷新")]),e._v(" "),t("el-button",{attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(n){e.handleSubmit(n)}}},[e._v("保存更改")])],1)],1)},staticRenderFns:[]},d=t("VU/8")(s,c,!1,null,null,null),n.default=d.exports}});